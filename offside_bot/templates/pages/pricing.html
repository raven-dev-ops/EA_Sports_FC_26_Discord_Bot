{% extends "layouts/public.html" %}
{% from "macros/ui.html" import button, badge %}

{% block content %}
  <h1>Pricing</h1>
  <p class="muted">Pricing is per server. Start free and upgrade when you need premium workflows.</p>

  <div class="card flex justify-between items-center gap-12 flex-wrap">
    <div>
      <strong>Billing cadence</strong>
      <div class="muted mt-6">Yearly pricing is coming soon.</div>
    </div>
    <div class="flex gap-10 flex-wrap">
      <a class="btn secondary" href="{{ toggle_monthly_href }}">{{ "Monthly" if billing != "monthly" else "Monthly ✓" }}</a>
      <a class="btn secondary" href="{{ toggle_yearly_href }}">{{ "Yearly (soon)" if billing != "yearly" else "Yearly ✓ (soon)" }}</a>
    </div>
  </div>

  <div class="card flex justify-between items-center gap-12 flex-wrap">
    <div>
      <strong>Trust & billing</strong>
      <div class="muted mt-6">Cancel anytime. Free tier never asks for a card.</div>
    </div>
    <div class="flex gap-10 flex-wrap">
      <span class="badge ok">Stripe</span>
      <span class="badge">Per server</span>
      <span class="badge">No long-term lock-in</span>
    </div>
  </div>

  <div class="row">
    <div class="card">
      <div class="flex justify-between items-center gap-10">
        <strong>Free</strong>
        {{ badge("FREE", "free") }}
      </div>
      <div class="text-xl font-800 mt-8">$0</div>
      <div class="muted">for every server</div>
      <ul class="mt-12">
        <li>Dashboards + setup wizard</li>
        <li>Roster + recruiting workflows</li>
        <li>Basic analytics</li>
      </ul>
      <div class="mt-12">
        {{ button("Add to Discord", "/install", "blue") }}
      </div>
    </div>

    <div class="card">
      <div class="flex justify-between items-center gap-10">
        <div class="flex gap-10 items-center">
          <strong>Pro</strong>
          {{ badge("PRO", "pro") }}
          <span class="badge ok">MOST POPULAR</span>
        </div>
      </div>
      <div class="text-xl font-800 mt-8">
        {% if billing == "yearly" %}
          Coming soon
        {% else %}
          ${{ pro_monthly_price }}
        {% endif %}
      </div>
      <div class="muted">{% if billing == "yearly" %}Yearly billing coming soon{% else %}per server / month{% endif %}</div>
      <ul class="mt-12">
        <li>Premium coach tiers</li>
        <li>Premium coaches report</li>
        <li>FC25 stats integration</li>
        <li>Banlist checks</li>
        <li>Tournament automation</li>
      </ul>
      <div class="mt-12">
        {{ button("Upgrade", pro_cta_href, "blue") }}
      </div>
    </div>

    <div class="card">
      <div class="flex justify-between items-center gap-10">
        <strong>Enterprise</strong>
        {{ badge("CONTACT", "ok") }}
      </div>
      <div class="text-xl font-800 mt-8">Custom</div>
      <div class="muted">for large communities</div>
      <ul class="mt-12">
        <li>Custom onboarding + support</li>
        <li>Multi-server admin workflows</li>
        <li>SLA / dedicated infra (optional)</li>
      </ul>
      <div class="mt-12">
        {{ button("Contact", enterprise_cta_href, "secondary") }}
      </div>
    </div>
  </div>

  <h2>Compare plans</h2>
  <table>
    <thead>
      <tr>
        <th>Feature</th>
        <th>Free</th>
        <th>Pro</th>
        <th>Enterprise</th>
      </tr>
    </thead>
    <tbody>
      {% for feat in features %}
        <tr>
          <td>
            <strong>{{ feat.name }}</strong>
            <div class="muted">{{ feat.description }}</div>
          </td>
          <td>{{ "✓" if feat.free else "—" }}</td>
          <td>{{ "✓" if feat.pro else "—" }}</td>
          <td>{{ "✓" if feat.enterprise else "—" }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

  <h2>FAQ</h2>
  <div class="card">
    <p><strong>Is pricing per server?</strong></p>
    <p class="muted">Yes. Each Discord server can stay Free or upgrade to Pro independently.</p>
    <p class="mt-14"><strong>Can I cancel anytime?</strong></p>
    <p class="muted">Yes. Manage upgrades and cancellations in the billing portal.</p>
    <p class="mt-14"><strong>Do you offer invoices or PO?</strong></p>
    <p class="muted">Enterprise plans support invoicing and custom onboarding.</p>
  </div>

  <div class="card">
    <div class="flex justify-between items-center gap-12 flex-wrap">
      <div>
        <div><strong>Ready to upgrade?</strong></div>
        <div class="muted mt-6">Pro upgrades are managed in the dashboard billing page.</div>
      </div>
      <div class="flex gap-10 flex-wrap">
        {{ button("Billing", pro_cta_href, "secondary") }}
        {{ button("Login", "/login", "") }}
      </div>
    </div>
  </div>
{% endblock %}
