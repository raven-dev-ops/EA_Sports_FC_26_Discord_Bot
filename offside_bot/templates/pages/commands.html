{% extends "layouts/public.html" %}

{% block content %}
  <section class="pt-6 pb-10">
    <div class="rounded-2xl border border-slate-800/80 bg-surface-dark p-10">
      <div class="inline-flex items-center gap-2 rounded-full border border-primary/20 bg-primary/10 px-4 py-1.5 text-sm font-semibold tracking-wide text-primary">
        Command Reference
      </div>
      <h1 class="mt-4 text-3xl font-bold tracking-tight text-white md:text-4xl">Commands</h1>
      <p class="mt-4 text-lg text-slate-400">Browse Offside slash commands for EA Sports FC 26 league operations.</p>
    </div>
  </section>

  <section class="py-6">
    <div class="rounded-xl border border-slate-800/80 bg-surface-dark p-6">
      <div class="flex flex-wrap items-center gap-4">
        <input
          id="commands-search"
          type="search"
          placeholder="Search commands..."
          aria-label="Search commands"
          class="w-full flex-1 rounded-lg border border-slate-700/80 bg-slate-900/60 px-4 py-2 text-sm text-slate-200 md:w-auto"
        />
        <div class="flex flex-wrap gap-2">
          <button class="btn-filter secondary" type="button" data-commands-filter="all">All</button>
          <button class="btn-filter secondary" type="button" data-commands-filter="coach">Coach</button>
          <button class="btn-filter secondary" type="button" data-commands-filter="staff">Staff</button>
          <button class="btn-filter secondary" type="button" data-commands-filter="tournament">Tournament</button>
          <button class="btn-filter secondary" type="button" data-commands-filter="ops">Ops</button>
        </div>
      </div>
      <div class="mt-4 text-sm text-slate-500" id="commands-count" role="status" aria-live="polite"></div>
    </div>
  </section>

  <div id="commands-empty" class="hidden text-sm text-slate-400" role="status" aria-live="polite">
    No commands match your search.
  </div>

  {% for category in categories %}
    <section data-commands-section data-commands-group="{{ category.group }}" class="py-6">
      <h2 class="mb-4 text-2xl font-semibold text-white">{{ category.name }}</h2>

      {% for command in category.commands %}
        <details
          class="mb-4 overflow-hidden rounded-xl border border-slate-800/80 bg-surface-dark"
          data-command-card
          data-commands-group="{{ category.group }}"
          data-commands-search="{{ command.search_text }}"
        >
          <summary class="flex cursor-pointer items-start justify-between gap-4 px-4 py-4">
            <span class="flex flex-col gap-2">
              <code class="text-sm font-semibold text-primary">{{ command.signature }}</code>
              {% if command.description %}
                <span class="text-sm text-slate-400">{{ command.description }}</span>
              {% endif %}
            </span>
            <span class="rounded-full border border-slate-700/80 bg-slate-900/60 px-3 py-1 text-xs font-semibold text-slate-300">
              {{ category.group|upper }}
            </span>
          </summary>
          <div class="border-t border-slate-800/80 px-4 py-4 text-sm text-slate-400">
            {% if command.permissions %}
              <div><span class="text-slate-500">Permissions:</span> {{ command.permissions }}</div>
            {% endif %}
            {% if command.example %}
              <div class="mt-3"><span class="text-slate-500">Example:</span> <code class="text-primary">{{ command.example }}</code></div>
            {% endif %}
          </div>
        </details>
      {% endfor %}
    </section>
  {% endfor %}
{% endblock %}
