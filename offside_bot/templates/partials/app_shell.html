<div class="topbar">
  <div class="flex gap-10 items-center">
    <button
      class="icon-btn"
      type="button"
      data-sidebar-toggle
      aria-label="Toggle menu"
      aria-controls="app-sidebar"
      aria-expanded="false"
    >
      &#9776;
    </button>
    <a class="brand" href="/app">
      <img class="brand-logo" src="{{ static_url('brand/logo.svg') }}" alt="Offside" width="24" height="24" />
      <span>Offside</span>
    </a>
  </div>
  <div class="flex gap-10 items-center">
    {% if guild_selector %}
      <select aria-label="Select server" onchange="window.location=this.value">
        {% for opt in guild_selector %}
          <option value="{{ opt.href }}" {% if opt.selected %}selected{% endif %}>{{ opt.label }}</option>
        {% endfor %}
      </select>
    {% endif %}
    {% if plan_badge %}{{ plan_badge|safe }}{% endif %}
    {% if install_badge %}{{ install_badge|safe }}{% endif %}
  </div>
  <div class="flex gap-10 items-center">
    {% if invite_cta %}{{ invite_cta|safe }}{% endif %}
    <span class="muted">{{ username }}</span>
    <a class="btn secondary" href="/logout">Logout</a>
  </div>
</div>

<div class="layout">
  <div class="sidebar-backdrop" data-sidebar-toggle aria-hidden="true"></div>
  <aside class="sidebar" id="app-sidebar" aria-label="Navigation">
    <div class="card">
      {% if nav_groups %}
        {% for group in nav_groups %}
          <div class="nav-group">
            <div class="nav-group-title">{{ group.label }}</div>
            {% for item in group.items %}
              <a
                class="navlink{% if item.active %} active{% endif %}{% if item.locked %} locked{% endif %}"
                href="{{ item.href }}"
                {% if item.lock_reason %}title="{{ item.lock_reason }}"{% endif %}
              >
                <span>{{ item.label }}</span>
                {% if item.locked %}
                  <span class="nav-meta">
                    <span class="muted">&#128274;</span>
                    <span class="badge pro inline">PRO</span>
                  </span>
                {% endif %}
              </a>
            {% endfor %}
          </div>
        {% endfor %}
      {% elif nav_items %}
        {% for item in nav_items %}
          <a class="navlink{% if item.active %} active{% endif %}" href="{{ item.href }}">{{ item.label }}</a>
        {% endfor %}
      {% else %}
        <div class="muted">Select a server to see modules.</div>
      {% endif %}
    </div>
  </aside>
  <main class="content">
    {% if plan_notice %}{{ plan_notice|safe }}{% endif %}
    {% if breadcrumbs %}
      <div class="breadcrumbs">
        {% for crumb in breadcrumbs %}
          {% if crumb.href %}
            <a href="{{ crumb.href }}">{{ crumb.label }}</a>
          {% else %}
            <span>{{ crumb.label }}</span>
          {% endif %}
          {% if not loop.last %}
            <span class="muted">/</span>
          {% endif %}
        {% endfor %}
      </div>
    {% endif %}
    {{ content|safe }}
  </main>
</div>
